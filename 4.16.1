using System;
using System.IO;
using System.Linq;

static class ProgramExtensions
{
    public static int[] FilterNumbers(this int[] numbers, int lowerBound, int upperBound)
    {
        return numbers.Where(num => num < lowerBound || num > upperBound)
                      .OrderByDescending(num => num)
                      .ToArray();
    }
}

class Program
{
    static void Main()
    {
        int a = 5; // Нижняя граница отрезка
        int b = 10; // Верхняя граница отрезка

        string filePath = "numbers.txt"; // Путь к файлу с числами

        try
        {
            int[] numbers = File.ReadAllLines(filePath) // Чтение всех строк из файла
                                .Select(int.Parse) // Преобразование строк в числа типа int
                                .ToArray(); // Преобразование последовательности в массив чисел

            int[] outsideRange = numbers.FilterNumbers(a, b); // Использование метода расширения для фильтрации чисел

            // Запись чисел из массива в файл в одну строку, разделенную пробелами
            string outputFilePath = "output.txt";
            File.WriteAllText(outputFilePath, string.Join(" ", outsideRange)); // Запись чисел в файл

            Console.WriteLine("Данные записаны в файл 'output.txt'.");
        }
        catch (FileNotFoundException ex)
        {
            Console.WriteLine($"Файл '{filePath}' не найден: {ex.Message}");
        }
        catch (FormatException ex)
        {
            Console.WriteLine($"Невозможно преобразовать строку в число: {ex.Message}");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Произошла ошибка: {ex.Message}");
        }
    }
}
